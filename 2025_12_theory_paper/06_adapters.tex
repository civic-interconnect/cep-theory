% ============================================================
\section{Jurisdictional Adapters as Oplax Functors}
\label{sec:adapters}
% ============================================================

\subsection{Motivation}

Jurisdictions frequently maintain their own data schemas, codes, or
structural conventions. Let $\mathbf{J_{\mathrm{local}}}$ denote the
category generated by a jurisdiction's native schema and transformation
rules, and let $\mathbf{J_{\mathrm{global}}}$ denote the category
induced by CEP vocabularies and canonical record structures.

Any adapter must reconcile these two perspectives. However, the mapping
from local to global structure is typically \emph{weak}: optional fields
may not appear locally, local compositions may collapse distinctions
preserved globally, and some structural information may be lost.

This motivates the use of \emph{oplax functors}, which formalize
structure-weakening translations between categories.

% ------------------------------------------------------------
\subsection{Oplax Functor
  \texorpdfstring{$\mathcal{A}$}{A}}
% ------------------------------------------------------------

An adapter is modeled as an oplax functor
\begin{equation}
  \mathcal{A} :
  \mathbf{J_{\mathrm{local}}}
  \longrightarrow
  \mathbf{J_{\mathrm{global}}}.
\end{equation}

For every pair of composable morphisms
$f : X \to Y$ and $g : Y \to Z$ in
$\mathbf{J_{\mathrm{local}}}$, oplaxity means that we have a
\emph{coherence morphism}
\begin{equation}
  \phi_{f,g} :
  \mathcal{A}(g) \circ \mathcal{A}(f)
  \;\Longrightarrow\;
  \mathcal{A}(g \circ f),
\end{equation}
which need not be invertible. This captures the possibility of
\emph{lossy harmonization}: two distinct local transformations may be
indistinguishable at the global level.

\begin{figure}[h]
  \centering
  \begin{tikzpicture}[node distance=3.2cm,>=Stealth]
    \node (X) {$X$};
    \node (Y) [right of=X] {$Y$};
    \node (Z) [right of=Y] {$Z$};

    \draw[->] (X) -- node[above] {$f$} (Y);
    \draw[->] (Y) -- node[above] {$g$} (Z);

    \node (AX) [below of=X, yshift=-1.2cm] {$\mathcal{A}(X)$};
    \node (AY) [below of=Y, yshift=-1.2cm] {$\mathcal{A}(Y)$};
    \node (AZ) [below of=Z, yshift=-1.2cm] {$\mathcal{A}(Z)$};

    \draw[->] (AX) -- node[above] {$\mathcal{A}(f)$} (AY);
    \draw[->] (AY) -- node[above] {$\mathcal{A}(g)$} (AZ);

    \draw[->, dashed, bend left=35]
      (AX) to node[below] {$\mathcal{A}(g \circ f)$} (AZ);

    \draw[->, shorten >=6pt, shorten <=6pt]
      ($(AY)!0.5!(AZ)$) -- node[right] {$\phi_{f,g}$}
      ($(AX)!0.5!(AY)$);
  \end{tikzpicture}
  \caption{An oplax adapter: compositions are preserved only up to a
    coherence morphism $\phi_{f,g}$.}
  \label{fig:oplax-adapter}
\end{figure}

This structure formalizes \textbf{Jurisdictional Autonomy}:  
local schemas may preserve distinctions or collapse details not present
in the global vocabulary, while still participating coherently in the
CEP ecosystem.

\FigureCallout{Adapters as Oplax Functors (Jurisdictional Autonomy)}{
An oplax functor models the fact that the translation from a local
schema to the global CEP vocabulary may weaken structure. Local
compositions $g \circ f$ may only match their global images up to a
coherence morphism $\phi_{f,g}$, reflecting partial, lossy, or
jurisdiction-specific mappings. This accommodates local flexibility
without violating global interoperability.
}

% ------------------------------------------------------------
\subsection{Correctness Criteria for Adapters}
% ------------------------------------------------------------

A jurisdictional adapter $\mathcal{A}$ is valid for CEP if and only if
it satisfies the following criteria:

\begin{enumerate}
  \item \textbf{Required-field preservation.}
    For every required local field,  
    $\mathcal{A}$ must map it to a required term in the CEP vocabulary.
    Formally, required morphisms in $\mathbf{J_{\mathrm{local}}}$
    must map to required morphisms in $\mathbf{J_{\mathrm{global}}}$.

  \item \textbf{Optional weakening via coherence.}
    Optional fields or partial structures must be captured by the oplax
    coherence morphisms $\phi_{f,g}$, ensuring that weakened structure
    is still well-typed globally.

  \item \textbf{Canonicalization compatibility.}
    The canonical identifier must be computable on the image of the
    adapter:
    \begin{equation}
      \mathcal{C}(\mathcal{A}(R))
      \quad \text{is defined for all admissible local records } R.
    \end{equation}
    This guarantees that local jurisdictions can produce stable and
    globally comparable SNFEI identifiers.

  \item \textbf{Provenance monotonicity.}
    Adapter-induced transformations must not contradict envelope
    attestations or revision-order invariants established in
    $\mathbf{CEP}$.

  \item \textbf{Functoriality on valid updates.}
    For any valid local update $u : R \to R'$, the image
    $\mathcal{A}(u)$ must remain a valid update in the CEP record
    system, modulo the required oplax coherence.
\end{enumerate}

A valid adapter therefore acts as a structure-respecting mediator
between local civic systems and the global CEP representation while
allowing precisely the amount of structural weakening necessary for
jurisdictional independence.
